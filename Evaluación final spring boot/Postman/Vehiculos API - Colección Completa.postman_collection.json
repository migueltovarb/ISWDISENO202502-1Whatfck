{
  "info": {
    "name": "Veh√≠culos API - Colecci√≥n Completa",
    "description": "Colecci√≥n completa de pruebas para la API REST de Gesti√≥n de Veh√≠culos - Spring Boot + MongoDB",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "auth": {
    "type": "noauth"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080/api",
      "type": "string"
    },
    {
      "key": "vehiculo_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "vehiculo_placa",
      "value": "XYZ123",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "üè• Health Check",
      "item": [
        {
          "name": "Verificar estado de la API",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/health",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "health"]
            },
            "description": "Verifica que la API est√© funcionando correctamente"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üìä Estad√≠sticas",
      "item": [
        {
          "name": "Obtener estad√≠sticas del sistema",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/estadisticas",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "estadisticas"]
            },
            "description": "Obtiene m√©tricas generales sobre los veh√≠culos del sistema"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üÜï Operaciones CRUD - Crear",
      "item": [
        {
          "name": "Crear veh√≠culo - Toyota Corolla",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"marca\": \"Toyota\",\n  \"modelo\": \"Corolla\",\n  \"a√±o\": 2024,\n  \"placa\": \"{{vehiculo_placa}}\",\n  \"precio\": 25000.00,\n  \"tipo\": \"sedan\",\n  \"disponible\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehiculos",
              "host": ["{{base_url}}"],
              "path": ["vehiculos"]
            },
            "description": "Crea un nuevo veh√≠culo en el sistema"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has vehicle data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData.marca).to.eql('Toyota');",
                  "    pm.expect(jsonData.placa).to.eql(pm.variables.get('vehiculo_placa'));",
                  "});",
                  "",
                  "pm.test(\"Save vehicle ID for later tests\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('vehiculo_id', jsonData.id);",
                  "    console.log('Vehicle ID saved:', jsonData.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": []
        },
        {
          "name": "Crear veh√≠culo - Honda Civic",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"marca\": \"Honda\",\n  \"modelo\": \"Civic\",\n  \"a√±o\": 2023,\n  \"placa\": \"HON999\",\n  \"precio\": 22000.00,\n  \"tipo\": \"sedan\",\n  \"disponible\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehiculos",
              "host": ["{{base_url}}"],
              "path": ["vehiculos"]
            },
            "description": "Crea otro veh√≠culo para tener m√°s datos de prueba"
          },
          "response": []
        },
        {
          "name": "Crear veh√≠culo - Ford Explorer (No disponible)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"marca\": \"Ford\",\n  \"modelo\": \"Explorer\",\n  \"a√±o\": 2023,\n  \"placa\": \"FOR888\",\n  \"precio\": 35000.00,\n  \"tipo\": \"SUV\",\n  \"disponible\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehiculos",
              "host": ["{{base_url}}"],
              "path": ["vehiculos"]
            },
            "description": "Crea un veh√≠culo no disponible para pruebas"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üìñ Operaciones CRUD - Leer",
      "item": [
        {
          "name": "Listar todos los veh√≠culos (paginado)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos?page=0&size=10",
              "host": ["{{base_url}}"],
              "path": ["vehiculos"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            },
            "description": "Obtiene todos los veh√≠culos con paginaci√≥n"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has pagination structure\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('content');",
                  "    pm.expect(jsonData).to.have.property('page');",
                  "    pm.expect(jsonData).to.have.property('totalElements');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": []
        },
        {
          "name": "Obtener veh√≠culo por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/{{vehiculo_id}}",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "{{vehiculo_id}}"]
            },
            "description": "Obtiene un veh√≠culo espec√≠fico por su ID"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Vehicle data is correct\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get('vehiculo_id'));",
                  "    pm.expect(jsonData.marca).to.eql('Toyota');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": []
        },
        {
          "name": "Obtener veh√≠culo por placa",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/placa/{{vehiculo_placa}}",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "placa", "{{vehiculo_placa}}"]
            },
            "description": "Obtiene un veh√≠culo espec√≠fico por su placa"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üîç Consultas Avanzadas",
      "item": [
        {
          "name": "Buscar veh√≠culos disponibles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/disponibles?disponible=true",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "disponibles"],
              "query": [
                {
                  "key": "disponible",
                  "value": "true"
                }
              ]
            },
            "description": "Obtiene solo los veh√≠culos disponibles"
          },
          "response": []
        },
        {
          "name": "Buscar veh√≠culos no disponibles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/disponibles?disponible=false",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "disponibles"],
              "query": [
                {
                  "key": "disponible",
                  "value": "false"
                }
              ]
            },
            "description": "Obtiene solo los veh√≠culos no disponibles"
          },
          "response": []
        },
        {
          "name": "Buscar por tipo - sedan",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/tipo/sedan",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "tipo", "sedan"]
            },
            "description": "Obtiene veh√≠culos por tipo espec√≠fico"
          },
          "response": []
        },
        {
          "name": "Buscar por tipo - SUV",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/tipo/SUV",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "tipo", "SUV"]
            },
            "description": "Obtiene veh√≠culos SUV"
          },
          "response": []
        },
        {
          "name": "Buscar por marca - Toyota",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/marca/Toyota",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "marca", "Toyota"]
            },
            "description": "Obtiene veh√≠culos de una marca espec√≠fica"
          },
          "response": []
        },
        {
          "name": "Buscar por marca - Honda",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/marca/Honda",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "marca", "Honda"]
            },
            "description": "Obtiene veh√≠culos Honda"
          },
          "response": []
        },
        {
          "name": "B√∫squeda avanzada - por 'toyota'",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/buscar?texto=toyota&page=0&size=10",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "buscar"],
              "query": [
                {
                  "key": "texto",
                  "value": "toyota"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            },
            "description": "B√∫squeda por texto en marca, modelo o tipo"
          },
          "response": []
        },
        {
          "name": "B√∫squeda avanzada - por 'sedan'",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/buscar?texto=sedan&page=0&size=10",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "buscar"],
              "query": [
                {
                  "key": "texto",
                  "value": "sedan"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            },
            "description": "B√∫squeda por tipo de veh√≠culo"
          },
          "response": []
        }
      ]
    },
    {
      "name": "‚úèÔ∏è Operaciones CRUD - Actualizar",
      "item": [
        {
          "name": "Actualizar precio del veh√≠culo",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"precio\": 28000.00\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehiculos/{{vehiculo_id}}",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "{{vehiculo_id}}"]
            },
            "description": "Actualiza solo el precio del veh√≠culo"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Price was updated\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.precio).to.eql(28000.00);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": []
        },
        {
          "name": "Marcar veh√≠culo como no disponible",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"disponible\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehiculos/{{vehiculo_id}}",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "{{vehiculo_id}}"]
            },
            "description": "Cambia la disponibilidad del veh√≠culo"
          },
          "response": []
        },
        {
          "name": "Actualizar modelo y a√±o",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"modelo\": \"Corolla XEi\",\n  \"a√±o\": 2025\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehiculos/{{vehiculo_id}}",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "{{vehiculo_id}}"]
            },
            "description": "Actualiza modelo y a√±o del veh√≠culo"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üóëÔ∏è Operaciones CRUD - Eliminar",
      "item": [
        {
          "name": "Eliminar veh√≠culo por ID",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/{{vehiculo_id}}",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "{{vehiculo_id}}"]
            },
            "description": "Elimina el veh√≠culo creado para pruebas"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});",
                  "",
                  "// 204 No Content responses don't have body, so skip content-type check",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": []
        }
      ]
    },
    {
      "name": "‚ùå Casos de Error",
      "item": [
        {
          "name": "Crear veh√≠culo con placa duplicada",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"marca\": \"Nissan\",\n  \"modelo\": \"Sentra\",\n  \"a√±o\": 2023,\n  \"placa\": \"DEF456\",\n  \"precio\": 20000.00,\n  \"tipo\": \"sedan\",\n  \"disponible\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehiculos",
              "host": ["{{base_url}}"],
              "path": ["vehiculos"]
            },
            "description": "Intenta crear un veh√≠culo con placa que ya existe (debe fallar)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": []
        },
        {
          "name": "Crear veh√≠culo con placa inv√°lida",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"marca\": \"Nissan\",\n  \"modelo\": \"Sentra\",\n  \"a√±o\": 2023,\n  \"placa\": \"INVALID\",\n  \"precio\": 20000.00,\n  \"tipo\": \"sedan\",\n  \"disponible\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehiculos",
              "host": ["{{base_url}}"],
              "path": ["vehiculos"]
            },
            "description": "Intenta crear un veh√≠culo con formato de placa inv√°lido (debe fallar)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": []
        },
        {
          "name": "Crear veh√≠culo con precio inv√°lido",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"marca\": \"Nissan\",\n  \"modelo\": \"Sentra\",\n  \"a√±o\": 2023,\n  \"placa\": \"NIS999\",\n  \"precio\": 500.00,\n  \"tipo\": \"sedan\",\n  \"disponible\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehiculos",
              "host": ["{{base_url}}"],
              "path": ["vehiculos"]
            },
            "description": "Intenta crear un veh√≠culo con precio por debajo del m√≠nimo (debe fallar)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": []
        },
        {
          "name": "Obtener veh√≠culo con ID inexistente",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/507f1f77bcf86cd799439011",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "507f1f77bcf86cd799439011"]
            },
            "description": "Intenta obtener un veh√≠culo con ID que no existe (debe fallar)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": []
        },
        {
          "name": "Actualizar veh√≠culo inexistente",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"precio\": 30000.00\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehiculos/507f1f77bcf86cd799439011",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "507f1f77bcf86cd799439011"]
            },
            "description": "Intenta actualizar un veh√≠culo que no existe (debe fallar)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": []
        },
        {
          "name": "Eliminar veh√≠culo inexistente",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/507f1f77bcf86cd799439011",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "507f1f77bcf86cd799439011"]
            },
            "description": "Intenta eliminar un veh√≠culo que no existe (debe fallar)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": []
        }
      ]
    },
    {
      "name": "üîÑ Flujo Completo de Pruebas",
      "item": [
        {
          "name": "üèÉ‚Äç‚ôÇÔ∏è Ejecutar flujo completo (crear, consultar, actualizar, eliminar)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vehiculos/health",
              "host": ["{{base_url}}"],
              "path": ["vehiculos", "health"]
            },
            "description": "Punto de inicio para ejecutar el flujo completo de pruebas. Ejecuta las requests en orden para probar todas las funcionalidades."
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Scripts de pre-request globales",
          "// Se ejecutan antes de cada request",
          "",
          "// Configurar timestamp para requests √∫nicos",
          "pm.globals.set('timestamp', new Date().getTime());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Tests globales",
          "// Se ejecutan despu√©s de cada request",
          "",
          "pm.test(\"Response time is less than 2000ms\", function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(2000);",
          "});",
          "",
          "pm.test(\"Response has proper headers\", function () {",
          "    pm.response.to.have.header('Content-Type');",
          "});"
        ]
      }
    }
  ]
}